"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[430,561],{56469:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M6.091 8.625a.844.844 0 01.115 1.68l-.115.008c-.727 0-1.324.552-1.396 1.26l-.008.143v6.19c0 .728.554 1.327 1.263 1.4l.144.006h6.185c.728 0 1.327-.553 1.399-1.262l.007-.144a.844.844 0 111.687 0 3.094 3.094 0 01-2.905 3.088L12.28 21H6.094a3.094 3.094 0 01-3.088-2.905L3 17.906v-6.19a3.091 3.091 0 013.091-3.091zM17.906 3a3.094 3.094 0 013.088 2.905l.005.189v6.187a3.094 3.094 0 01-2.905 3.088l-.188.006h-6.189A3.094 3.094 0 018.63 12.47l-.005-.189V6.094a3.094 3.094 0 012.905-3.088L11.717 3h6.189z",fill:"currentcolor",fillRule:"evenodd"})))}},58524:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M6.091 8.625a.844.844 0 01.115 1.68l-.115.008c-.727 0-1.324.552-1.396 1.26l-.008.143v6.19c0 .728.554 1.327 1.263 1.4l.144.006h6.185c.728 0 1.327-.553 1.399-1.262l.007-.144a.844.844 0 111.687 0 3.094 3.094 0 01-2.905 3.088L12.28 21H6.094a3.094 3.094 0 01-3.088-2.905L3 17.906v-6.19a3.091 3.091 0 013.091-3.091zM17.906 3a3.094 3.094 0 013.088 2.905l.005.189v6.187a3.094 3.094 0 01-2.905 3.088l-.188.006h-6.189A3.094 3.094 0 018.63 12.47l-.005-.189V6.094a3.094 3.094 0 012.905-3.088L11.717 3h6.189zm0 1.688h-6.189c-.728 0-1.327.553-1.399 1.262l-.007.144v6.187c0 .728.554 1.327 1.263 1.4l.143.007h6.189c.728 0 1.327-.554 1.399-1.263l.007-.144V6.094c0-.728-.554-1.327-1.263-1.4l-.143-.006z",fill:"currentcolor",fillRule:"evenodd"})))}},1056:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M11.916 7.25L4.64 14.526A5.633 5.633 0 003 18.366L3 18.683l.05 2.268 2.268.05.315-.001a5.641 5.641 0 003.619-1.429l.224-.211 7.274-7.275-4.834-4.834zM17.586 3a3.218 3.218 0 00-2.17.763l-.18.166-1.709 1.71 4.834 4.834 1.712-1.711c1.275-1.277 1.231-3.402-.1-4.735A3.49 3.49 0 0017.8 3.012l-.215-.011z",fill:"currentcolor",fillRule:"evenodd"})))}},48706:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M13.637 4.213c1.607-1.605 4.206-1.604 5.9-.076l.166.157.158.167c1.479 1.639 1.53 4.121.081 5.737l-.155.164-8.831 8.83a6.197 6.197 0 01-4.27 1.806H6.4l-3.325-.074-.073-3.324a6.216 6.216 0 011.61-4.352l.195-.205 8.83-8.83zM11.93 8.041l-6.063 6.063a4.694 4.694 0 00-1.365 3.2v.263l.04 1.89 1.89.041.263-.001a4.7 4.7 0 003.015-1.19l.187-.177 6.061-6.06L11.93 8.04zm4.724-3.54a2.682 2.682 0 00-1.808.635l-.15.138L13.274 6.7l4.028 4.028L18.726 9.3c1.063-1.064 1.027-2.835-.083-3.945a2.908 2.908 0 00-1.81-.846l-.18-.01z",fill:"currentcolor",fillRule:"evenodd"})))}},68351:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M14.077 3c-2.64 0-4.345 1.739-4.345 4.43v2.042H7.369A.368.368 0 007 9.84v2.96c0 .203.165.367.37.367h2.362v7.467c0 .203.165.367.369.367h3.082c.204 0 .37-.164.37-.367v-7.467h2.761c.204 0 .37-.164.37-.367v-2.96a.366.366 0 00-.369-.367h-2.763V7.741c0-.832.2-1.255 1.29-1.255h1.583c.204 0 .37-.165.37-.367V3.37a.368.368 0 00-.37-.367z",fill:"#3b5998",fillRule:"evenodd"})))}},57733:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M14.863 2c-2.933 0-4.828 1.932-4.828 4.922v2.27H7.41a.41.41 0 00-.41.407v3.289a.41.41 0 00.41.407h2.625v8.297c0 .226.184.408.41.408h3.425a.41.41 0 00.41-.408v-8.297h3.069c.227 0 .41-.182.41-.407l.002-3.289a.407.407 0 00-.411-.408h-3.07V7.268c0-.925.222-1.394 1.434-1.394l1.759-.001a.41.41 0 00.41-.408V2.412a.41.41 0 00-.41-.408z",fill:"currentcolor",fillRule:"evenodd"})))}},62744:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M12 3a1 1 0 011 1l.001 1.071A7.005 7.005 0 0118.929 11H20a1 1 0 010 2l-1.071.001a7.005 7.005 0 01-5.928 5.928L13 20a1 1 0 01-2 0v-1.07A7.005 7.005 0 015.071 13L4 13a1 1 0 010-2h1.07A7.005 7.005 0 0111 5.07V4a1 1 0 011-1zm1.001 4.1L13 8a1 1 0 01-2 0v-.9A5.006 5.006 0 007.1 11H8a1 1 0 010 2l-.9.001A5.006 5.006 0 0011 16.9V16a1 1 0 012 0l.001.9A5.006 5.006 0 0016.9 13L16 13a1 1 0 010-2h.9A5.006 5.006 0 0013 7.1zM12 10.5a1.5 1.5 0 110 3 1.5 1.5 0 010-3z",fill:"currentcolor",fillRule:"evenodd"})))}},34537:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M12 3a1 1 0 011 1l.001.566A7.504 7.504 0 0119.434 11H20a1 1 0 010 2l-.566.001A7.504 7.504 0 0113 19.434L13 20a1 1 0 01-2 0v-.566A7.504 7.504 0 014.566 13L4 13a1 1 0 010-2h.566A7.504 7.504 0 0111 4.566V4a1 1 0 011-1zm1 3.083V6.5a1 1 0 01-2 0v-.417A6.005 6.005 0 006.083 11H6.5a1 1 0 010 2h-.417A6.005 6.005 0 0011 17.918V17.5a1 1 0 012 0v.417A6.005 6.005 0 0017.918 13L17.5 13a1 1 0 010-2h.417a6.005 6.005 0 00-4.916-4.917zM12 9a3 3 0 110 6 3 3 0 010-6zm0 1.5a1.5 1.5 0 100 3 1.5 1.5 0 000-3z",fill:"currentcolor",fillRule:"evenodd"})))}},6160:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M19.453 7.745c-.14 6.502-4.219 11.025-10.406 11.308-2.531.141-4.36-.707-6.047-1.696 1.828.282 4.219-.424 5.484-1.555-1.828-.142-2.953-1.131-3.515-2.686.562.141 1.125 0 1.547 0-1.688-.565-2.813-1.555-2.954-3.816.422.282.985.424 1.547.424C3.844 9.017 3 6.33 3.984 4.635 5.812 6.614 8.062 8.31 11.72 8.593c-.985-3.958 4.36-6.078 6.469-3.392.984-.142 1.687-.566 2.39-.849-.281.99-.844 1.555-1.547 2.12.703-.14 1.407-.282 1.969-.565-.14.707-.844 1.272-1.547 1.838z",fill:"#1da1f2",fillRule:"evenodd"})))}},30244:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M20.281 8.16c-.156 7.225-4.687 12.251-11.562 12.565-2.813.157-4.844-.785-6.719-1.884 2.031.314 4.687-.471 6.094-1.728-2.032-.157-3.282-1.256-3.907-2.984.625.157 1.25 0 1.72 0-1.876-.628-3.126-1.728-3.282-4.24.469.314 1.094.47 1.719.47C2.937 9.575 2 6.59 3.094 4.707c2.031 2.198 4.531 4.083 8.593 4.397-1.093-4.397 4.844-6.753 7.188-3.77 1.094-.156 1.875-.627 2.656-.941-.312 1.099-.937 1.727-1.718 2.355.78-.157 1.562-.314 2.187-.628-.156.785-.938 1.414-1.719 2.042z",fill:"currentcolor",fillRule:"evenodd"})))}},21953:(e,t,n)=>{n.d(t,{Z:()=>c});var r,a,o,l=n(35776);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=function(e){return l.createElement("svg",i({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=l.createElement("linearGradient",{id:"color_svg__a",x1:"50.001%",x2:"50.001%",y1:"99.99%",y2:"-.011%"},l.createElement("stop",{offset:0,stopColor:"#20b038"}),l.createElement("stop",{offset:1,stopColor:"#60d66a"}))),a||(a=l.createElement("linearGradient",{id:"color_svg__b",x1:"50.001%",x2:"50.001%",y1:"100.003%",y2:".003%"},l.createElement("stop",{offset:0,stopColor:"#f9f9f9"}),l.createElement("stop",{offset:1,stopColor:"currentcolor"}))),o||(o=l.createElement("g",{fill:"none",fillRule:"evenodd"},l.createElement("g",{fillRule:"nonzero"},l.createElement("path",{d:"M7.39 18.497l.296.175a8.067 8.067 0 004.111 1.125h.004c4.452 0 8.075-3.622 8.077-8.075a8.026 8.026 0 00-2.364-5.713 8.025 8.025 0 00-5.71-2.368c-4.456 0-8.08 3.622-8.082 8.074 0 1.526.427 3.012 1.235 4.298l.193.305-.817 2.98zM2 21.607l1.379-5.035a9.697 9.697 0 01-1.297-4.857C2.084 6.358 6.443 2 11.8 2a9.657 9.657 0 016.874 2.85 9.657 9.657 0 012.844 6.873c-.002 5.356-4.362 9.715-9.718 9.715h-.004a9.71 9.71 0 01-4.645-1.182z",fill:"currentcolor"}),l.createElement("path",{d:"M2.417 11.72c0 1.653.431 3.267 1.252 4.69l-1.331 4.86 4.974-1.305a9.38 9.38 0 004.483 1.142h.004c5.171 0 9.38-4.208 9.382-9.38a9.321 9.321 0 00-2.745-6.635 9.323 9.323 0 00-6.637-2.75c-5.171 0-9.38 4.206-9.383 9.378",fill:"url(#color_svg__a)"}),l.createElement("path",{d:"M2.082 11.717c-.001 1.712.446 3.384 1.297 4.857L2 21.61l5.152-1.351a9.713 9.713 0 004.644 1.182h.004c5.356 0 9.717-4.359 9.72-9.715a9.657 9.657 0 00-2.845-6.874 9.658 9.658 0 00-6.875-2.85c-5.357 0-9.716 4.36-9.719 9.716m3.069 4.604l-.193-.306a8.053 8.053 0 01-1.235-4.297c.002-4.453 3.626-8.075 8.081-8.075 2.158 0 4.186.842 5.711 2.368a8.026 8.026 0 012.364 5.713c-.002 4.453-3.625 8.075-8.078 8.075h-.003c-1.45 0-2.871-.39-4.111-1.125l-.295-.175-3.058.801z",fill:"url(#color_svg__b)"})),l.createElement("path",{d:"M9.371 7.655c-.181-.404-.373-.412-.546-.42-.142-.005-.304-.005-.465-.005a.892.892 0 00-.648.304c-.222.243-.85.83-.85 2.025 0 1.195.87 2.35.992 2.511.121.162 1.68 2.693 4.148 3.666 2.051.809 2.469.648 2.914.607.445-.04 1.437-.587 1.639-1.154.202-.567.202-1.053.142-1.154-.061-.102-.223-.162-.466-.284-.243-.121-1.437-.709-1.66-.79-.222-.08-.384-.121-.546.122-.162.243-.627.79-.768.952-.142.162-.284.182-.527.06-.243-.121-1.025-.377-1.952-1.205-.722-.643-1.21-1.438-1.351-1.681-.142-.243-.016-.375.106-.496.11-.109.243-.283.365-.425.12-.142.161-.243.242-.405.081-.162.04-.304-.02-.425-.06-.122-.533-1.323-.749-1.803",fill:"currentcolor"}))))}},90173:(e,t,n)=>{n.d(t,{Z:()=>l});var r,a=n(35776);function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}const l=function(e){return a.createElement("svg",o({height:"1em",viewBox:"0 0 24 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=a.createElement("path",{d:"M2.081 11.717a9.7 9.7 0 001.298 4.857L2 21.61l5.152-1.351a9.71 9.71 0 004.27 1.175l.378.007c5.356 0 9.717-4.359 9.72-9.715a9.657 9.657 0 00-2.845-6.874 9.658 9.658 0 00-6.875-2.85c-5.357 0-9.716 4.36-9.719 9.716zm9.722-8.074c2.158 0 4.186.842 5.711 2.368a8.026 8.026 0 012.364 5.713c-.002 4.37-3.493 7.94-7.831 8.072l-.25.003c-1.45 0-2.871-.39-4.111-1.125l-.295-.175-3.058.801.817-2.98-.193-.305a8.053 8.053 0 01-1.235-4.297c.002-4.453 3.626-8.075 8.081-8.075zM8.36 7.23a.892.892 0 00-.648.304l-.16.175c-.276.31-.69.88-.69 1.85 0 .93.527 1.834.818 2.267l.217.307c.29.43 1.801 2.694 4.105 3.603l.445.17c1.67.615 2.058.475 2.469.437.445-.04 1.437-.587 1.639-1.154.202-.567.202-1.053.142-1.154a.415.415 0 00-.165-.135l-1.056-.52a17.562 17.562 0 00-.904-.419c-.223-.08-.385-.121-.547.122-.162.243-.627.79-.768.952-.124.142-.248.175-.44.1l-.46-.206a6.224 6.224 0 01-1.58-1.039c-.721-.643-1.209-1.438-1.35-1.681-.142-.243-.016-.375.106-.496.11-.109.243-.283.365-.425.12-.142.161-.243.242-.405a.42.42 0 00.008-.363l-.109-.25c-.158-.385-.495-1.23-.668-1.615-.181-.404-.373-.412-.546-.42-.142-.005-.304-.005-.465-.005z",fill:"currentcolor"})))}},82546:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(35776),a=n(27856),o=n(13830),l=n(57877),i=n(46114),c=n(17291);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){var t;let n=e.content,u=e.appendTooltipTo;const m=(0,r.useRef)(),d=s((0,r.useState)(""),2),f=d[0],p=d[1],h=s((0,r.useState)([0,0]),2),v=h[0],y=h[1],b=(0,i.k)({userId:f,requestUserInfo:!0}),g=b.fetchInfo,E=b.data,w=s((0,c.Z)((()=>p("")),200),2),x=w[0],O=w[1];return(0,r.useEffect)((()=>{if(!n||null==m||!m.current)return;const e=Array.from(m.current.getElementsByTagName("a")).filter((e=>!!e.getAttribute("data-mention-id")));if(0===e.length)return;const t=e=>{const t=e.target,n=t.getAttribute("data-mention-id");if(n&&n===f)return;const r=t.parentElement.offsetTop+t.offsetTop,a=140-t.getBoundingClientRect().width/2,o=[t.offsetLeft-a,-1*r+8];O(),y(o),p(n)};return e.forEach((e=>{e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",x)})),()=>{e.forEach((e=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",x)}))}}),[n,f]),(0,r.useEffect)((()=>{!E&&f&&g()}),[f]),r.default.createElement(l.R,{user:{id:f},tooltip:{placement:"top-start",offset:v,visible:!!f,onShow:O,appendTo:u||(null===(t=document)||void 0===t?void 0:t.body)||"parent"},onMouseEnter:O,onMouseLeave:x},r.default.createElement("div",{ref:m,className:o.Z.markdown,dangerouslySetInnerHTML:{__html:(0,a.sanitize)(n,{ADD_ATTR:["target"]})}}))}},83341:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(94184),a=n.n(r),o=n(35776),l=n(86548),i=n(89136),c=n(36876);function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}const u=e=>{let t=e.className,n=e.content,r=e.Icon,u=e.iconProps;const m=!(0,i.Z)([c.Mq.replace("@media ","")],[!0],!1);return o.default.createElement("span",{className:a()("flex items-center tablet:ml-2 tablet:gap-0.5 tablet:typo-footnote ml-1 typo-caption2 font-bold capitalize",t)},"function"==typeof r&&o.default.createElement(r,s({size:m?l.J.XXSmall:void 0},u)),n)}},89228:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(35776),a=n(52250),o=n(23833);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){let t=e.content,n=e.charactersLimit,a=void 0===n?150:n,i=e.threshold,c=void 0===i?50:i,s=e.contentPrefix,u=e.className;const m=l((0,r.useState)(!1),2),d=m[0],f=m[1],p=d?"Show less":"Show more",h=()=>t&&(null==t?void 0:t.length)>a+c;return r.default.createElement("div",{className:u},r.default.createElement("p",{className:"break-words typo-body"},s,d||!h()?t:(()=>{const e=null==t?void 0:t.slice(0,a);return e.slice(0,Math.min(e.length,e.lastIndexOf(" ")))})()," ",h()&&r.default.createElement(o.D,{className:"inline-flex text-theme-label-link",onClick:()=>f(!d)},p)))}const s=["summary"];function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const d=(0,r.forwardRef)((function(e,t){let n=e.summary,o=m(e,s);return r.default.createElement(a.FT,u({ref:t},o),r.default.createElement(c,{content:n,charactersLimit:300,threshold:50,contentPrefix:r.default.createElement(a.Ni,null,"TLDR")}))}))},19281:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(35776),a=n(34051);function o(){return r.default.createElement("article",{"aria-busy":!0,className:"flex flex-col items-stretch mt-4"},r.default.createElement("div",{className:"flex items-center mb-2"},r.default.createElement(a.f,{className:"w-10 h-10 rounded-10"}),r.default.createElement("div",{className:"flex flex-col flex-1 justify-between ml-2 h-8"},r.default.createElement(a.f,{className:"w-2/5 h-3 rounded-xl"}),r.default.createElement(a.f,{className:"w-1/5 h-3 rounded-xl"}))),r.default.createElement(a.f,{className:"my-2 w-full h-8 rounded-full"}))}},58700:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(35776),a=n(19281);function o(e){let t=e.placeholderAmount;const n=t<=5?t:5;return r.default.createElement(r.default.Fragment,null,Object.keys([...Array(n)]).map((e=>r.default.createElement(a.Z,{key:e}))))}},68875:(e,t,n)=>{n.r(t),n.d(t,{ContextMenu:()=>m,default:()=>u});var r=n(35776),a=n(42343),o=n(57751),l=n(77314);const i=["options"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function u(e){return r.default.createElement(o.Z,null,r.default.createElement(a.v2,e))}const m=e=>{let t=e.options,n=s(e,i);return r.default.createElement(u,c({disableBoundariesCheck:!0,className:"menu-primary",animation:"fade"},n),t.map((e=>{let t=e.text,n=e.icon,o=e.action,i=e.anchorProps;return r.default.createElement(a.ck,{key:t,className:"typo-callout",onClick:o},r.default.createElement(l.Z,{condition:!!i,wrapper:e=>r.default.createElement("a",i,e)},r.default.createElement("span",{className:"flex gap-2 items-center w-full typo-callout"},n," ",t)))})))}},64651:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(58524),l=n(56469);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},61420:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(48706),l=n(1056);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},86024:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(57733),l=n(68351);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},60643:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(34537),l=n(62744);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},47487:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(30244),l=n(6160);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},14362:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(86548),o=n(90173),l=n(21953);function i(){return i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(this,arguments)}const c=e=>r.default.createElement(a.Z,i({},e,{IconPrimary:o.Z,IconSecondary:l.Z}))},74596:(e,t,n)=>{n.d(t,{Z:()=>O});var r=n(35776),a=n(94184),o=n.n(a),l=n(58953);const i="_1ZFp9S6jj01p1pyIVzuZzr";var c=n(52809),s=n(34051),u=n(8437);const m=()=>r.default.createElement("article",{"aria-busy":!0,className:"flex relative items-start py-2 pr-2 pl-4"},r.default.createElement(s.f,{className:"w-7 h-7 rounded-full mt-1"}),r.default.createElement("div",{className:"flex flex-col ml-3 mr-2 flex-1"},r.default.createElement(u.P5,{className:"w-4/5"}),r.default.createElement(u.P5,{className:"w-4/5"}),r.default.createElement(u.P5,{className:"w-2/5"})));var d=n(52250);const f=e=>{let t=e.padding,n=void 0===t?"py-3 px-4":t,a=e.textClassName;return r.default.createElement("article",{"aria-busy":!0,className:o()("flex relative flex-col items-start",n)},r.default.createElement(u.P5,{className:o()("w-4/5",a)}),r.default.createElement(u.P5,{className:o()("w-4/5",a)}),r.default.createElement(u.P5,{className:o()("w-2/5",a)}))};var p=n(58700);const h=(0,n(32256).Z)("div","flex flex-col flex-1 p-8"),v=e=>{let t=e.children;return r.default.createElement(u.Hl,null,r.default.createElement(u.P5,{className:"my-4 ml-6 w-2/5"}),r.default.createElement(u.Gd,null),t,r.default.createElement(u.Gd,null),r.default.createElement(u.P5,{className:"my-4 ml-6 w-2/5",style:{height:"1.25rem"}}))},y=e=>{let t=e.shouldShowWidgets,n=void 0===t||t,a=e.className;return r.default.createElement(r.default.Fragment,null,r.default.createElement(h,{className:a},r.default.createElement(s.f,{className:"my-2 mb-8 w-3/5 h-8 rounded-full"}),r.default.createElement(f,{padding:"p-0 gap-2",textClassName:"h-4"}),r.default.createElement("div",{className:"flex flex-row gap-2 my-8"},r.default.createElement(s.f,{className:"w-20 h-6 rounded-full"}),r.default.createElement(s.f,{className:"w-20 h-6 rounded-full"})),r.default.createElement(s.f,{className:"w-4/5 h-52 rounded-16"}),r.default.createElement(s.f,{className:"my-8 w-2/5 h-8 rounded-full"}),r.default.createElement(u.Gd,null),r.default.createElement(p.Z,null)),n&&r.default.createElement(d.ry,{className:"flex-1 p-8"},r.default.createElement(v,null,r.default.createElement(m,null),r.default.createElement(m,null),r.default.createElement(m,null)),r.default.createElement(v,null,r.default.createElement(f,null),r.default.createElement(f,null),r.default.createElement(f,null))))};var b=n(47164);const g=function(e){let t=e.type,n=e.className,a=e.hasNavigation;return t?t===c.hQ.Share?r.default.createElement(b.Z,{className:o()(n,"m-auto"),hasNavigation:a},r.default.createElement(y,{shouldShowWidgets:!1})):r.default.createElement(b.Z,{hasNavigation:a,className:o()(n,"tablet:pb-0 tablet:flex-row bg-theme-bg-primary")},r.default.createElement(y,{className:"tablet:border-r tablet:border-theme-divider-tertiary"})):null},E=["className","children","isLoading","postType","loadingClassName"];function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const O=function(e){let t=e.className,n=e.children,a=e.isLoading,c=e.postType,s=e.loadingClassName,u=x(e,E);return r.default.createElement(l.u_,w({size:l.u_.Size.XLarge,kind:l.u_.Kind.FlexibleTop,portalClassName:i,id:"post-modal"},u,{className:o()(t,"post-modal focus:outline-none"),overlayClassName:"post-modal-overlay bg-overlay-quaternary-onion"}),a?r.default.createElement(g,{hasNavigation:!0,type:c,className:s}):n)}},87642:(e,t,n)=>{n.d(t,{N:()=>E,Z:()=>O});var r=n(86484),a=n.n(r),o=n(35776),l=n(94184),i=n.n(l),c=n(43057),s=n(26990),u=n(7732),m=n(27052),d=n(84558),f=n(63031),p=n(25782),h=n(38e3),v=n(15098);function y(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const E="DISMISS_PERMISSION_BANNER",w={[v.Yq.NotificationsPage]:"px-6 w-full border-l bg-theme-float",[v.Yq.NewComment]:"rounded-16 border px-4 mx-3 mb-3",[v.Yq.CommunityPicks]:"rounded-16 border px-4 mt-3",[v.Yq.NewSourceModal]:"",[v.Yq.SquadPage]:"rounded-16 border px-4 mt-6"},x={[v.Yq.NotificationsPage]:!1,[v.Yq.NewComment]:!1,[v.Yq.CommunityPicks]:!1,[v.Yq.NewSourceModal]:!1,[v.Yq.SquadPage]:!0};const O=function(e){let t=e.source,n=void 0===t?v.Yq.NotificationsPage:t,r=e.contentName,l=e.className;const g=(0,h.Os)().trackEvent,O=(0,o.useContext)(u.ZP),N=O.isInitialized,P=O.isSubscribed,k=O.isNotificationSupported,S=O.hasPermissionCache,C=O.acceptedPermissionJustNow,j=O.onAcceptedPermissionJustNow,Z=O.onTogglePermission,I=b((0,c.Z)(E,!1),3),A=I[0],M=I[1],z=I[2],R=()=>{g({event_name:v.s6.ClickNotificationDismiss,extra:JSON.stringify({origin:n})}),M(!0)},L=function(){var e,t=(e=a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(n);case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return");case 5:r="granted"===t,null==j||j(r);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){y(o,r,a,l,i,"next",e)}function i(e){y(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}(),T=(P||S)&&C,B=[!z,A,!N,!k,(P||S)&&!C].some((e=>e));if((0,o.useEffect)((()=>{B||g({event_name:v.s6.Impression,target_type:v.Lm.EnableNotifications,extra:JSON.stringify({origin:n})})}),[B]),(0,o.useEffect)((()=>()=>{null==j||j(!1)}),[]),B)return null;const D={[v.Yq.NewComment]:`Want to get notified when ${null!=r?r:"someone"} responds so you can continue the conversation?`,[v.Yq.CommunityPicks]:"Would you like to get notified on the status of your post submissions in real time?",[v.Yq.NotificationsPage]:"Stay in the loop whenever you get a mention, reply and other important updates.",[v.Yq.NewSourceModal]:"",[v.Yq.SquadPage]:`Get notified whenever something important happens on ${r}.`}[n],q=w[n],U=x[n];return o.default.createElement("div",{className:i()("overflow-hidden relative py-4 typo-callout border-theme-color-cabbage",q,l)},n===v.Yq.NotificationsPage&&o.default.createElement("span",{className:"flex flex-row font-bold"},C&&o.default.createElement(f.Z,{className:"mr-2"}),"Push notifications"+(C?" successfully enabled":"")),o.default.createElement("p",{className:"mt-2 w-full tablet:w-3/5 text-theme-label-tertiary"},C?o.default.createElement(o.default.Fragment,null,"Changing your"," ",o.default.createElement("a",{className:"underline hover:no-underline",href:`${p.uJ}account/notifications`},"notification settings")," ","can be done anytime through your account details"):D),o.default.createElement("div",{className:"flex mt-4 align-center"},!T&&o.default.createElement(s.z,{buttonSize:s.q.Small,className:"mr-4 min-w-[7rem] btn-primary-cabbage",onClick:L},"Enable notifications"),U&&o.default.createElement(s.z,{buttonSize:s.q.Small,className:"btn-tertiary",onClick:R},"Dismiss")),o.default.createElement("img",{className:i()("hidden tablet:flex absolute w-[7.5rem] -bottom-2",C?"right-14":"right-4"),src:C?d.n.notifications.browser_enabled:d.n.notifications.browser,alt:"A sample browser notification"}),!U&&o.default.createElement(m.Z,{buttonSize:s.q.XSmall,className:"top-1 laptop:top-3 right-1 laptop:right-3",onClick:R,position:"absolute"}))}},89907:(e,t,n)=>{n.d(t,{F:()=>dt,D:()=>mt});var r=n(5152),a=n.n(r),o=n(35776),l=n(48584),i=n(94184),c=n.n(i),s=n(26990),u=n(84558),m=n(38e3),d=n(15098),f=n(21144);function p(e){let t=e.onInitializeOnboarding,n=e.className;const r=(0,o.useContext)(m.ZP).trackEvent;return(0,o.useEffect)((()=>{r({event_name:d.s6.Impression,target_type:d.Lm.ArticleAnonymousCTA,target_id:f.o0.ArticleOnboarding})}),[]),o.default.createElement("div",{className:c()("flex relative rounded-16 border border-theme-color-cabbage",n),onClick:t,role:"button",tabIndex:0,"aria-label":"Customize your feed",onKeyDown:e=>{"Enter"===e.key&&t()}},o.default.createElement("div",{className:"py-3 px-4 w-3/5"},o.default.createElement("p",{className:"font-bold typo-callout"},"Let's super-charge your feed with the content you actually read!"),o.default.createElement(s.z,{className:"mt-4 btn-primary-cabbage",buttonSize:s.q.Small,tabIndex:-1},"Customize")),o.default.createElement("img",{src:u.n.feedFilters.topicsV3,alt:"example topics for your feed",className:"absolute right-0"}))}var h=n(62835),v=n(86484),y=n.n(v),b=n(88767),g=n(1038),E=n.n(g),w=n(98677),x=n(17291),O=n(87328),N=n(7525);function P(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){P(o,r,a,l,i,"next",e)}function i(e){P(o,r,a,l,i,"throw",e)}l(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A=(e,t,n)=>{const r=e.findIndex((e=>e.node.id===t));return[r,e[r].node.children.edges.findIndex((e=>e.node.id===n))]},M=function(e,t){var n,r;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Z(t?{handle:t.author.username,authorId:t.author.id,authorName:t.author.name,authorImage:t.author.image,content:t.content,contentHtml:t.contentHtml,publishDate:t.lastUpdatedAt||t.createdAt,commentId:t.id,post:e}:{handle:null===(n=e.author)||void 0===n?void 0:n.username,authorId:null===(r=e.author)||void 0===r?void 0:r.id,authorName:e.source.name,authorImage:e.source.image,content:e.title,contentHtml:e.title,publishDate:e.createdAt,commentId:null,post:e},a)},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.enableShowShareNewComment;const r=(0,b.useQueryClient)(),a=(0,o.useContext)(m.ZP),l=a.trackEvent,i=(0,o.useContext)(h.ZP),c=i.user,s=i.showLogin,u=["post_comments",null==e?void 0:e.id],d=["post_comments_num",null==e?void 0:e.id],f=r.getQueryData(d)||(null==e?void 0:e.numComments),p=r.getQueryData(u),v=(0,o.useState)(0),g=S(v,2),P=g[0],C=g[1],j=(0,o.useState)(null),I=S(j,2),z=I[0],R=I[1],L=(0,o.useState)(null),T=S(L,2),B=T[0],D=T[1],q=(0,x.Z)((e=>D(e)),700),U=S(q,1),$=U[0],_=()=>{R(null),document.documentElement.scrollTop=P},F=(e,t)=>{t||$(e.id)},Q=(e,t)=>{C(window.scrollY),R(Z(Z({},e),{},{replyTo:t}))},Y=t=>{c?(l((0,w.gR)("open comment modal",e,{extra:{origin:t}})),C(window.scrollY),R(M(e))):s(O.IP.Comment)},H=t=>(0,N.cM)(r,e.id,{numComments:e.numComments+t}),V=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t)return{node:Z(Z({},e),{},{children:{edges:[],pageInfo:null}})};if(!z.commentId){const t=p.postComments.edges.find((t=>t.node.id===e.id));return Z(Z({},t),{},{node:Z(Z({},t.node),e)})}const n=p.postComments.edges.find((e=>e.node.id===z.commentId)),r=n.node.children.edges.find((t=>t.node.id===e.id));return Z(Z({},r),{},{node:Z(Z({},r.node),e)})},G=function(){var t=k(y().mark((function t(n,a){var o,l,i,c,s,m,h,v,b,g,w;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=["post_comments",e.id],t.next=3,r.cancelQueries(o);case 3:if(l=E()(p),i=l.postComments.edges,l){t.next=7;break}return t.abrupt("return",null);case 7:if(H(-1),a!==n){t.next=14;break}return m=i.findIndex((e=>e.node.id===n)),h=(null===(c=i[m].node.children)||void 0===c||null===(s=c.edges)||void 0===s?void 0:s.length)||0,r.setQueryData(d,f-(h+1)),i.splice(m,1),t.abrupt("return",r.setQueryData(u,l));case 14:return v=A(l.postComments.edges,a,n),b=S(v,2),g=b[0],w=b[1],l.postComments.edges[g].node.children.edges.splice(w,1),r.setQueryData(d,f-1),t.abrupt("return",r.setQueryData(u,l));case 18:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),W=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=E()(p);if(!n)return null;const a=V(e,t),o=p.postComments.edges,l=z.commentId;if(t){if(H(1),!l)return n.postComments.edges.push(a),r.setQueryData(u,n);const e=o.findIndex((e=>e.node.id===l));return n.postComments.edges[e].node.children.edges.push(a),r.setQueryData(u,n)}if(!l){const e=o.findIndex((e=>e.node.id===a.node.id));return n.postComments.edges[e]=a,r.setQueryData(u,n)}const i=A(o,l,a.node.id),c=S(i,2),s=c[0],m=c[1];return n.postComments.edges[s].node.children.edges[m]=a,r.setQueryData(u,n)},J=function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(W(t,n),n&&(l((0,w.gR)("comment post",e,{extra:{commentId:t.id,origin:"comment modal"}})),r.setQueryData(d,f+1),F(t,z.commentId)),_())};return(0,o.useEffect)((()=>{n&&$()}),[n]),(0,o.useMemo)((()=>({commentsNum:f,closeNewComment:_,openNewComment:Y,onCommentClick:Q,onShowShareNewComment:D,updatePostComments:J,deleteCommentCache:G,parentComment:z,showShareNewComment:B})),[f,_,Y,Q,D,J,G,z,B])};var R=n(17298),L=n(45909);function T(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){const t=(0,o.useContext)(m.ZP).trackEvent,n=B((0,o.useState)(null),2),r=n[0],a=n[1];return(0,o.useMemo)((()=>{return{shareComment:r,openShareComment:(n=y().mark((function n(r,o){return y().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!("share"in navigator)){n.next=11;break}return n.prev=1,n.next=4,navigator.share({text:`${o.title}\n${o.commentsPermalink}${(0,L.$7)(r.id)}`});case 4:t((0,w.gR)("share post",o,{extra:{origin:e,provider:R.YE.Native,commentId:r.id}})),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:n.next=12;break;case 11:a(r);case 12:case"end":return n.stop()}}),n,null,[[1,7]])})),o=function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function l(e){T(o,r,a,l,i,"next",e)}function i(e){T(o,r,a,l,i,"throw",e)}l(void 0)}))},function(e,t){return o.apply(this,arguments)}),closeShareComment:()=>a(null)};var n,o}),[r])}var U=n(39572),$=n(52809),_=n(87124);const F={post:"postUpvotes",comment:"commentUpvotes"},Q={post:$.c3,comment:L.U2};var Y=n(38050),H=n(92360),V=n(50562);const G={large:s.q.Medium,medium:s.q.Small};function W(e){let t=e.user,n=e.className,r=e.isCommenting,a=e.size,l=void 0===a?"large":a,i=e.onNewComment;return o.default.createElement("button",{type:"button",className:c()("flex items-center p-3 w-full rounded-16 typo-callout border",r?"bg-theme-active border-theme-divider-primary":"bg-theme-float hover:bg-theme-hover border-theme-divider-tertiary hover:border-theme-divider-primary",n),onClick:i},t?o.default.createElement(Y.YY,{user:t,size:l,nativeLazyLoading:!0}):o.default.createElement(H.E,{src:V.Zm.avatar,alt:"Placeholder image for anonymous user",className:(0,Y.o7)("large")}),o.default.createElement("span",{className:"ml-4 text-theme-label-tertiary"},"Share your thoughts"),o.default.createElement(s.z,{buttonSize:G[l],className:"ml-auto btn-secondary",readOnly:!0},"Post"))}var J=n(15733),K=n(30588),X=n(67521),ee=n(65545),te=n(52250),ne=n(46360),re=n(92600),ae=n(6217);function oe(e){let t=e.onShare,n=e.post,r=e.actionsClassName,a=void 0===r?"hidden mobileL:flex":r,l=e.onComment,i=e.onBookmark,c=e.origin,s=void 0===c?d.aP.ArticlePage:c;const u=(0,o.useContext)(m.ZP).trackEvent,f=(0,o.useContext)(h.ZP),p=f.user,v=f.showLogin,y=(0,re.Z)().updatePost,b=(0,ee.Z)({onUpvotePostMutate:y({id:n.id,update:{upvoted:!0,numUpvotes:n.numUpvotes+1}}),onCancelPostUpvoteMutate:y({id:n.id,update:{upvoted:!1,numUpvotes:n.numUpvotes+-1}})}),g=b.upvotePost,E=b.cancelPostUpvote;return o.default.createElement("div",{className:"flex justify-between py-2 px-4 rounded-16 border border-theme-divider-tertiary"},o.default.createElement(X.s,{id:"upvote-post-btn",pressed:n.upvoted,onClick:()=>{if(p){if(n.upvoted)return u((0,w.gR)((0,te.Rt)({upvoted:!1}),n,{extra:{origin:s}})),E({id:n.id});if(n)return u((0,w.gR)((0,te.Rt)({upvoted:!0}),n,{extra:{origin:s}})),g({id:n.id})}else v(O.IP.Upvote)},icon:o.default.createElement(J.Z,{secondary:n.upvoted}),"aria-label":"Upvote",responsiveLabelClass:a,className:"btn-tertiary-avocado"},"Upvote"),o.default.createElement(X.s,{id:"comment-post-btn",pressed:n.commented,onClick:l,icon:o.default.createElement(K.Z,{secondary:n.commented}),"aria-label":"Comment",responsiveLabelClass:a,className:"btn-tertiary-blueCheese"},"Comment"),o.default.createElement(X.s,{id:"bookmark-post-btn",pressed:n.bookmarked,onClick:i,icon:o.default.createElement(ae.Z,{secondary:n.bookmarked}),"aria-label":"Bookmark",responsiveLabelClass:a,className:"btn-tertiary-bun"},"Bookmark"),o.default.createElement(X.s,{id:"share-post-btn",onClick:()=>t(n),icon:o.default.createElement(ne.default,null),responsiveLabelClass:a,className:"btn-tertiary-cabbage"},"Share"))}var le=n(87642),ie=n(45200),ce=n(60643),se=n(82546),ue=n(62693),me=n(56015),de=n(57877),fe=n(23576),pe=n(83341),he=n(42343),ve=n(48214),ye=n(61420),be=n(55910),ge=n(23833),Ee=n(36583),we=n(77803),xe=n(68875),Oe=n(32256),Ne=n(11055),Pe=n(47393);function ke(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function Se(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){ke(o,r,a,l,i,"next",e)}function i(e){ke(o,r,a,l,i,"throw",e)}l(void 0)}))}}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Ze=(0,Oe.Z)("span","flex gap-2 items-center w-full");function Ie(e){var t,n,r,a;let l=e.post,i=e.comment,u=e.origin,d=e.parentId,f=e.className,p=e.onComment,v=e.onShare,g=e.onDelete,E=e.onEdit,x=e.onShowUpvotes;const N=`comment-actions-menu-${i.id}`,P=(0,he.av)({id:N}).show,k=(0,o.useContext)(m.ZP).trackEvent,S=(0,o.useContext)(h.ZP),C=S.user,j=S.showLogin,Z=Ce((0,o.useState)(i.upvoted),2),I=Z[0],A=Z[1],M=Ce((0,o.useState)(i.numUpvotes),2),z=M[0],R=M[1],T=(0,b.useQueryClient)();(0,o.useEffect)((()=>{A(i.upvoted),R(i.numUpvotes)}),[i]);const B=(0,we.Y)().requestMethod,D=(0,b.useMutation)((()=>B(V.B3,L.NA,{id:i.id})),{onMutate:(U=Se(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.cancelQueries("post_comments");case 2:return A(!0),R(z+1),e.abrupt("return",(()=>{A(I),R(z)}));case 5:case"end":return e.stop()}}),e)}))),function(){return U.apply(this,arguments)}),onError:(e,t,n)=>n()}),q=D.mutateAsync;var U;const $=(0,b.useMutation)((()=>B(V.B3,L.C5,{id:i.id})),{onMutate:(F=Se(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.cancelQueries("post_comments");case 2:return A(!1),R(z-1),e.abrupt("return",(()=>{A(I),R(z)}));case 5:case"end":return e.stop()}}),e)}))),function(){return F.apply(this,arguments)}),onError:(e,t,n)=>n()}),_=$.mutateAsync;var F;const Q=(null==C?void 0:C.id)===i.author.id,Y=Q||(null==C||null===(t=C.roles)||void 0===t?void 0:t.includes(be.G7.Moderator))||(null==l||null===(n=l.source)||void 0===n||null===(r=n.currentMember)||void 0===r||null===(a=r.permissions)||void 0===a?void 0:a.includes(Pe.gm.CommentDelete));return o.default.createElement("div",{className:c()("flex flex-row items-center",f)},o.default.createElement(Ee.i,{content:"Upvote"},o.default.createElement(s.z,{id:`comment-${i.id}-upvote-btn`,buttonSize:s.q.Small,pressed:I,onClick:()=>{if(C)return I?(k((0,w.gR)((0,te.sP)(!1),l,{extra:{origin:u,commentId:i.id}})),_()):(k((0,w.gR)((0,te.sP)(!0),l,{extra:{origin:u,commentId:i.id}})),q());j(O.IP.CommentUpvote)},icon:o.default.createElement(J.Z,{secondary:I}),className:"mr-3 btn-tertiary-avocado"})),o.default.createElement(Ee.i,{content:"Comment"},o.default.createElement(s.z,{buttonSize:s.q.Small,onClick:()=>p(i,d),icon:o.default.createElement(K.Z,null),className:"mr-3 btn-tertiary-blueCheese"})),o.default.createElement(Ee.i,{content:"Share comment"},o.default.createElement(s.z,{buttonSize:s.q.Small,onClick:()=>v(i),icon:o.default.createElement(ne.default,null),className:"mr-3 btn-tertiary-cabbage"})),Y&&o.default.createElement(Ne.Z,{tooltipPlacement:"top",onClick:e=>P(e,{position:(0,te.DZ)(e)})}),z>0&&o.default.createElement(Ee.i,{content:"See who upvoted"},o.default.createElement(ge.D,{className:"ml-auto",onClick:()=>x(i.id,z)},z," upvote",1===z?"":"s")),o.default.createElement(xe.default,{disableBoundariesCheck:!0,id:N,className:"menu-primary typo-callout",animation:"fade"},Q&&o.default.createElement(he.ck,{onClick:()=>E(i)},o.default.createElement(Ze,null,o.default.createElement(ye.Z,null)," Edit comment")),o.default.createElement(he.ck,{onClick:()=>g(i,d)},o.default.createElement(Ze,{className:"flex items-center w-full"},o.default.createElement(ve.Z,null)," Delete comment"))))}function Ae(e){let t=e.author,n=e.className,r=e.appendTooltipTo,a=e.badges;return o.default.createElement(de.R,{user:t,tooltip:{appendTo:r}},o.default.createElement(me.x,{href:t.permalink,className:c()("overflow-hidden font-bold whitespace-nowrap w-fit commentAuthor text-theme-label-primary typo-callout",n)},t.name,a))}var Me=n(30435);function ze(e){let t=e.comment,n=e.className;const r=!!t.lastUpdatedAt,a=r?t.lastUpdatedAt:t.createdAt;return o.default.createElement("time",{dateTime:a,className:c()("typo-callout",n)},`${r?"Modified ":""}${(0,Me.Pe)(a)}`)}var Re=n(3805);const Le=function(e){let t=e.post,n=e.comment,r=e.origin,a=e.commentHash,l=e.commentRef,i=e.parentId,s=e.onComment,u=e.onShare,m=e.onDelete,d=e.onEdit,f=e.onShowUpvotes,p=e.appendTooltipTo,h=e.postAuthorId,v=e.postScoutId,y=e.className,b=void 0===y?{}:y,g=e.children;const E=a===(0,L.$7)(n.id),w=(0,Re.t)({source:t.source,user:n.author}).role;return o.default.createElement("article",{ref:E?l:null,className:c()("flex flex-col p-4 rounded-24 hover:bg-theme-hover focus:outline",E?"border border-theme-color-cabbage":"border-theme-divider-tertiary",b.container)},g,o.default.createElement("header",{className:"flex z-1 flex-row"},o.default.createElement(de.R,{user:n.author,tooltip:{appendTo:p}},o.default.createElement(ue.a,{className:"z-1",user:n.author})),o.default.createElement("div",{className:"flex flex-col ml-3 typo-callout"},o.default.createElement(te.gq,null,o.default.createElement(Ae,{author:n.author,appendTooltipTo:p,badges:[o.default.createElement(fe.Z,{key:"squadMemberRole",role:w}),n.author.id===h&&o.default.createElement(pe.Z,{key:"author",className:"text-theme-status-help",content:"Author",Icon:ie.Z,iconProps:{secondary:!0}}),n.author.id===v&&o.default.createElement(pe.Z,{key:"scout",className:"text-theme-color-bun",content:"Scout",Icon:ce.Z,iconProps:{secondary:!0}})]})),o.default.createElement(te.gq,{className:"items-center text-theme-label-quaternary"},o.default.createElement(me.x,{href:n.author.permalink},"@",n.author.username),o.default.createElement("div",{className:"mx-2 w-0.5 h-0.5 bg-theme-label-quaternary"}),o.default.createElement(ze,{comment:n})))),o.default.createElement("div",{className:c()("mt-3 break-words-overflow typo-body",b.content)},o.default.createElement(se.Z,{content:n.contentHtml,appendTooltipTo:p}),o.default.createElement(Ie,{post:t,comment:n,origin:r,parentId:i,onShare:u,onComment:s,onDelete:m,onEdit:d,onShowUpvotes:f,className:"mt-3"})))},Te=["comment","parentComment","onEdit"];function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function De(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const qe=function(e){let t=e.comment,n=e.parentComment,r=e.onEdit,a=De(e,Te);return o.default.createElement(Le,Be({},a,{key:t.id,parentId:n.id,comment:t,onEdit:e=>r(e,n),className:{container:"relative",content:"ml-14"}}),o.default.createElement("div",{className:"absolute top-0 bottom-0 left-9 -ml-px w-0.5 bg-theme-float"}))},Ue=["className","comment","appendTooltipTo","permissionNotificationCommentId"];function $e(){return $e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Fe(e){var t,n,r,a,l,i;e.className;let c=e.comment,s=e.appendTooltipTo,u=e.permissionNotificationCommentId,m=_e(e,Ue);const f=(0,o.useContext)(h.ZP).user,p=u===c.id||(null===(t=c.children)||void 0===t||null===(n=t.edges)||void 0===n?void 0:n.some((e=>e.node.id===u)));return o.default.createElement("section",{className:"flex flex-col items-stretch rounded-24 border border-theme-divider-tertiary scroll-mt-16"},o.default.createElement(Le,$e({},m,{comment:c,parentId:c.id,className:{container:"border-b"},appendTooltipTo:s})),null===(r=c.children)||void 0===r?void 0:r.edges.map((e=>{let t=e.node;return o.default.createElement(qe,$e({},m,{key:t.id,comment:t,parentComment:c,appendTooltipTo:s}))})),p&&o.default.createElement(le.Z,{className:!(null!==(a=c.children)&&void 0!==a&&null!==(l=a.edges)&&void 0!==l&&l.length)&&"mt-3",source:d.Yq.NewComment,contentName:(null==f?void 0:f.id)!==(null==c?void 0:c.author.id)?null==c||null===(i=c.author)||void 0===i?void 0:i.name:void 0}))}var Qe=n(58700),Ye=n(25782),He=n(69282),Ve=n(32713);function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Je(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function Ke(e){var t,n;let r=e.post,a=e.origin,l=e.onClick,i=e.onShare,c=e.onClickUpvote,s=e.modalParentSelector,u=e.permissionNotificationCommentId;const m=r.id,d=(0,o.useRef)(),f=(0,o.useContext)(h.ZP),p=f.user,v=f.showLogin,g=f.tokenRefreshed,E=(0,Ve.sW)().displayToast,w=(0,we.Y)().requestMethod,x=(0,He.G)().showPrompt,N=["post_comments",m],P=(0,b.useQuery)(N,(()=>w(V.B3,L.nW,{postId:m,[Ye.UK]:k,first:500},{requestKey:JSON.stringify(N)})),{enabled:!!m&&g,refetchInterval:6e4}),k=P.data,S=P.isLoading,C=window.location.hash,j=(null==k||null===(t=k.postComments)||void 0===t||null===(n=t.edges)||void 0===n?void 0:n.length)||0,Z=(0,o.useRef)(null),I=z(r).deleteCommentCache,A=function(){var e,t=(e=y().mark((function e(t,n){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={title:"Delete comment?",description:"Are you sure you want to delete your comment? This action cannot be undone.",okButton:{title:"Delete",className:"btn-primary-cabbage"}},e.next=3,x(r);case 3:if(!e.sent){e.next=8;break}return e.next=6,(0,L.YF)(t,w);case 6:E("The comment has been deleted"),I(t,n);case 8:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){Je(o,r,a,l,i,"next",e)}function i(e){Je(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),R=Ge((0,o.useState)(!!C),2),T=R[0],B=R[1];if((0,o.useEffect)((()=>{j>0&&T&&Z.current&&(Z.current.scrollIntoView({block:"center",inline:"nearest"}),B(!1))}),[j,T]),0===r.numComments)return o.default.createElement("div",{className:"mt-8 mb-12 text-center text-theme-label-quaternary typo-subhead"},"Be the first to comment.");if(S||null===k)return o.default.createElement(Qe.Z,{placeholderAmount:r.numComments});const D=e=>e.author.id===p.id?"":`@${e.author.username} `,q=(e,t)=>{if(p){const n=M(r,e);n.commentId=t;const a=D(e);l(n,a)}else v(O.IP.Comment)},U=(e,t)=>{const n={editContent:e.content,editId:e.id},a=D(e);l(M(r,t,n),a)};return o.default.createElement("div",{className:"flex flex-col gap-4 mb-12",ref:d},k.postComments.edges.map((e=>{var t,n;return o.default.createElement(Fe,{post:r,origin:a,commentHash:C,commentRef:Z,comment:e.node,key:e.node.id,onComment:q,onShare:i,onDelete:(e,t)=>A(e.id,t),onEdit:U,onShowUpvotes:c,postAuthorId:null===(t=r.author)||void 0===t?void 0:t.id,postScoutId:null===(n=r.scout)||void 0===n?void 0:n.id,appendTooltipTo:null!=s?s:()=>null==d?void 0:d.current,permissionNotificationCommentId:u})})))}function Xe(e){let t=e.post,n=e.onUpvotesClick;const r=t.numUpvotes||0,a=t.numComments||0;return o.default.createElement("div",{className:"flex gap-x-4 items-center my-5 text-theme-label-tertiary typo-callout"},t.views>0&&o.default.createElement("span",null,t.views.toLocaleString()," Views"),r>0&&o.default.createElement(ge.D,{onClick:()=>n(r)},r," Upvote",r>1?"s":""),a>0&&o.default.createElement("span",null,a.toLocaleString()," Comment"+(1===a?"":"s")))}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const nt=a()((()=>n.e(313).then(n.bind(n,7448)))),rt=a()((()=>n.e(449).then(n.bind(n,15195)))),at=a()((()=>n.e(125).then(n.bind(n,72484))),{ssr:!1}),ot=a()((()=>n.e(489).then(n.bind(n,58858))));const lt=function(e){let t=e.post,n=e.onShare,r=e.onBookmark,a=e.analyticsOrigin,l=e.shouldOnboardAuthor,i=e.enableShowShareNewComment;const c=["post",t.id],s=(0,h.Eu)(),u=s.user,m=s.showLogin,d=et((0,o.useState)(!1),2),f=d[0],p=d[1],v=et((0,o.useState)(),2),y=v[0],b=v[1],g=(()=>{const e=(0,_.e)(),t=e.modal,n=e.openModal,r=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"post";n({type:U.nT.UpvotedPopup,props:{placeholderAmount:t,requestQuery:{queryKey:[F[r],e],query:Q[r],params:{id:e,first:50}}}})};return(0,o.useMemo)((()=>{var e,n;return{onShowUpvoted:r,queryKey:null==t||null===(e=t.props)||void 0===e||null===(n=e.requestQuery)||void 0===n?void 0:n.queryKey}}),[t])})(),E=g.onShowUpvoted,w=z(t,{enableShowShareNewComment:i}),x=w.closeNewComment,N=w.openNewComment,P=w.onCommentClick,k=w.updatePostComments,S=w.onShowShareNewComment,C=w.parentComment,j=w.showShareNewComment,Z=q(a),I=Z.shareComment,A=Z.openShareComment,M=Z.closeShareComment;return(0,o.useEffect)((()=>{l&&p(!0)}),[l]),o.default.createElement(o.default.Fragment,null,o.default.createElement(Xe,{post:t,onUpvotesClick:e=>E(t.id,e)}),o.default.createElement(oe,{onBookmark:r,onShare:n,post:t,postQueryKey:c,onComment:()=>N("comment button"),actionsClassName:"hidden laptop:flex",origin:a}),o.default.createElement(W,{user:u,className:"my-6",isCommenting:!!C,onNewComment:()=>N("start discussion button")}),o.default.createElement(Ke,{post:t,origin:a,onClick:P,onShare:e=>A(e,t),onClickUpvote:(e,t)=>E(e,t,"comment"),permissionNotificationCommentId:y}),f&&o.default.createElement(nt,{onSignUp:!u&&(()=>m(O.IP.Author))}),C&&o.default.createElement(rt,{isOpen:!!C,parentComment:C,onRequestClose:x,onComment:(e,t)=>{t&&b(e.id),k(e,t)},post:t}),j&&o.default.createElement(at,{post:t,commentId:j,onRequestClose:()=>S(null)}),I&&o.default.createElement(ot,{isOpen:!!I,post:t,comment:I,origin:a,onRequestClose:M}))};var it=n(8115);function ct(){return ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ct.apply(this,arguments)}const st=a()((()=>n.e(489).then(n.bind(n,58858)))),ut=a()((()=>n.e(876).then(n.bind(n,65639)))),mt=120;function dt(e){let t=e.post,n=e.isFallback,r=e.origin,a=e.children,i=e.className,c=void 0===i?{}:i,s=e.navigationProps,u=e.engagementProps,m=e.shouldOnboardAuthor,d=e.enableShowShareNewComment,f=e.customNavigation;if(!(null!=t?t:{}).id&&!n)return o.default.createElement(ut,null);const h=u.onCloseShare,v=u.sharePost,y=u.onSharePost,b=u.onToggleBookmark,g=(0,o.useContext)(it.Z),E=g.onStartArticleOnboarding,w=g.showArticleOnboarding;return o.default.createElement(o.default.Fragment,null,w&&o.default.createElement(p,{className:null==c?void 0:c.onboarding,onInitializeOnboarding:E}),null!=f?f:o.default.createElement(l.Z,ct({},s,{className:c.navigation})),a,o.default.createElement(lt,{post:t,onShare:y,analyticsOrigin:r,onBookmark:b,shouldOnboardAuthor:m,enableShowShareNewComment:d}),v&&o.default.createElement(st,{isOpen:!!v,post:t,origin:r,onRequestClose:h}))}},70939:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(94184),a=n.n(r),o=n(35776),l=n(48584);const i=["onPreviousPost","onNextPost","postPosition","post","className"];function c(){return c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const u=function(e){let t=e.onPreviousPost,n=e.onNextPost,r=e.postPosition,u=e.post,m=e.className,d=void 0===m?{}:m,f=s(e,i);const p=`Published on ${null==u?void 0:u.source.name}`,h=null!=u&&u.author?`${p} by ${null==u?void 0:u.author.name}`:p,v={title:null==u?void 0:u.title,subtitle:h},y=!!t||!!n;return o.default.createElement(l.Z,c({},f,{inlineActions:!0,post:u,className:{container:a()("fixed z-3 w-full bg-theme-bg-secondary border border-theme-divider-tertiary py-4 px-6 top-0 ml-0","laptop:left-[unset] max-w-full",null==d?void 0:d.container),actions:null==d?void 0:d.actions},onPreviousPost:t,onNextPost:n,postPosition:r}),o.default.createElement("div",{className:a()("overflow-hidden flex-col flex-1 ml-2",y&&"hidden tablet:flex")},o.default.createElement("span",{className:"overflow-hidden whitespace-nowrap typo-footnote text-ellipsis text-theme-label-tertiary"},v.subtitle),o.default.createElement("h3",{className:"overflow-hidden font-bold whitespace-nowrap text-ellipsis typo-headline"},v.title)))}},62510:(e,t,n)=>{n.d(t,{Dg:()=>ot,C2:()=>it,QY:()=>at});var r=n(94184),a=n.n(r),o=n(35776),l=n(50104),i=n(89228),c=n(41542),s=n(86484),u=n.n(s),m=n(52250),d=n(64651),f=n(46360),p=n(86992),h=n(26990),v=n(8437);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){let t=e.share,n=e.link;const r=y((0,p._)(n),2),a=r[0],l=r[1];return o.default.createElement(v.Hl,{className:"flex laptop:hidden flex-col gap-2 items-start p-3"},o.default.createElement(h.z,{buttonSize:h.q.Small,onClick:()=>l(),pressed:a,icon:o.default.createElement(d.Z,null),className:"btn-tertiary-avocado"},a?"Copied!":"Copy link"),o.default.createElement(h.z,{buttonSize:h.q.Small,onClick:t,icon:o.default.createElement(f.default,null),className:"btn-tertiary-cabbage"},"Share with your friends"))}var E=n(62835),w=n(98677),x=n(38e3),O=n(14362),N=n(47487),P=n(86024),k=n(17298),S=n(32256),C=n(36583),j=n(15098);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const A=(0,S.Z)(h.z,"my-1"),M=(0,S.Z)(A,"text-white");function z(e){let t=e.post;const n=t.commentsPermalink,r=Z((0,p._)(n),2),a=r[0],l=r[1],i=(0,o.useContext)(x.ZP).trackEvent,c=e=>i((0,w.gR)("share post",t,{extra:{provider:e,origin:j.aP.ShareBar}}));return o.default.createElement(v.Hl,{className:"hidden laptop:flex flex-col p-3"},o.default.createElement("p",{className:"typo-callout text-theme-label-tertiary"},"Would you recommend this post?"),o.default.createElement("div",{className:"inline-flex relative flex-row items-center mt-3"},o.default.createElement(C.i,{content:"Copy link"},o.default.createElement(A,{onClick:()=>{l(),c(k.YE.CopyLink)},pressed:a,icon:o.default.createElement(d.Z,null),className:"btn-tertiary-avocado"})),o.default.createElement(C.i,{content:"Share on WhatsApp"},o.default.createElement(M,{tag:"a",href:(0,k.iD)(n),target:"_blank",rel:"noopener",onClick:()=>c(k.YE.WhatsApp),icon:o.default.createElement(O.Z,{secondary:!0}),className:"btn-tertiary"})),o.default.createElement(C.i,{content:"Share on Twitter"},o.default.createElement(M,{tag:"a",href:(0,k.nO)(n,t.title),target:"_blank",rel:"noopener",onClick:()=>c(k.YE.Twitter),icon:o.default.createElement(N.Z,{secondary:!0}),className:"btn-tertiary"})),o.default.createElement(C.i,{content:"Share on Facebook"},o.default.createElement(M,{tag:"a",href:(0,k.Qk)(n),target:"_blank",rel:"noopener",onClick:()=>c(k.YE.Facebook),icon:o.default.createElement(P.Z,{secondary:!0}),className:"btn-tertiary"}))))}var R=n(28687),L=n.n(R),T=n(88767),B=n(67217);const D=R.gql`
  query SimilarPosts(
    $post: ID!
    $loggedIn: Boolean! = false
    $trendingFirst: Int
    $similarFirst: Int
    $discussedFirst: Int
    $tags: [String]!
  ) {
    trendingPosts: randomTrendingPosts(post: $post, first: $trendingFirst) {
      id
      title
      permalink
      commentsPermalink
      bookmarked @include(if: $loggedIn)
      source {
        ...SourceShortInfo
      }
      scout {
        ...UserShortInfo
      }
      author {
        ...UserShortInfo
      }
      trending
      tags
    }
    similarPosts: randomSimilarPostsByTags(
      tags: $tags
      post: $post
      first: $similarFirst
    ) {
      id
      title
      permalink
      commentsPermalink
      bookmarked @include(if: $loggedIn)
      source {
        ...SourceShortInfo
      }
      scout {
        ...UserShortInfo
      }
      author {
        ...UserShortInfo
      }
      numComments
      numUpvotes
      tags
    }
    discussedPosts: randomDiscussedPosts(post: $post, first: $discussedFirst) {
      id
      title
      permalink
      commentsPermalink
      numComments
      source {
        ...SourceShortInfo
      }
      tags
      scout {
        ...UserShortInfo
      }
      author {
        ...UserShortInfo
      }
      featuredComments {
        author {
          ...UserShortInfo
        }
      }
    }
  }
  ${B.T}
  ${B.JT}
`;var q=n(50562),U=n(96491),$=n(41664),_=n.n($),F=n(8311),Q=n(6217),Y=n(44295),H=n(43536),V=n(34051);function G(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const W=o.default.createElement("div",{className:"h-px bg-theme-divider-tertiary"}),J="w-7 h-7 rounded-full mt-1",K="flex flex-col ml-3 mr-2 flex-1",X=e=>{let t=e.post,n=e.onLinkClick,r=e.onBookmark;return o.default.createElement("article",{className:a()("relative flex py-2 pl-4 pr-2 group items-start hover:bg-theme-hover",Y.Z.card)},o.default.createElement(H.YS,{href:t.commentsPermalink,title:t.title,onClick:()=>n(t),onMouseUp:e=>1===e.button&&n(t)}),o.default.createElement(c.w,{imgSrc:t.source.image,imgAlt:t.source.name,className:J}),o.default.createElement("div",{className:K},o.default.createElement("h5",{className:a()("typo-callout text-theme-label-primary mb-0.5 multi-truncate break-words text-ellipsis",Y.Z.title)},t.title),o.default.createElement("div",{className:"flex items-center typo-footnote text-theme-label-tertiary"},t.trending?o.default.createElement(o.default.Fragment,null,o.default.createElement(m.nJ,null),o.default.createElement("div",{className:"ml-2"},t.trending," devs read it last hour")):o.default.createElement(o.default.Fragment,null,t.numUpvotes>0&&o.default.createElement("div",null,t.numUpvotes," Upvotes"),t.numComments>0&&o.default.createElement("div",{className:t.numUpvotes>0&&"ml-2"},t.numComments," Comments")))),o.default.createElement(C.i,{content:t.bookmarked?"Remove bookmark":"Bookmark"},o.default.createElement(h.z,{className:"group-hover:visible mouse:invisible mt-1 btn-tertiary-bun",pressed:t.bookmarked,buttonSize:h.q.Small,icon:o.default.createElement(Q.Z,{secondary:t.bookmarked}),onClick:()=>r(t)})))},ee=(0,S.Z)(V.f,"h-3 rounded-xl my-0.5"),te=()=>o.default.createElement("article",{"aria-busy":!0,className:"flex relative items-start py-2 pr-2 pl-4"},o.default.createElement(V.f,{className:J}),o.default.createElement("div",{className:K},o.default.createElement(ee,{style:{width:"80%"}}),o.default.createElement(ee,{style:{width:"80%"}}),o.default.createElement(ee,{style:{width:"40%"}})));function ne(e){let t=e.posts,n=e.isLoading,r=e.onBookmark,l=e.className;const i=(0,o.useContext)(x.ZP).trackEvent,c=function(){var e,t=(e=u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i((0,w.gR)("click",t,{extra:{origin:"recommendation"}}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){G(o,r,a,l,i,"next",e)}function i(e){G(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}();return o.default.createElement("section",{className:a()("flex flex-col rounded-2xl bg-theme-bg-primary border-theme-divider-quaternary border",l)},o.default.createElement("h4",{className:"py-3 pr-4 pl-6 typo-body text-theme-label-tertiary"},"You might like"),W,n?o.default.createElement(o.default.Fragment,null,o.default.createElement(te,null),o.default.createElement(te,null),o.default.createElement(te,null)):o.default.createElement(o.default.Fragment,null,t.map((e=>o.default.createElement(X,{key:e.id,post:e,onLinkClick:c,onBookmark:r})))),W,o.default.createElement(_(),{href:"https://app.daily.dev/",passHref:!0},o.default.createElement(h.z,{className:"self-start my-2 ml-2 btn-tertiary",buttonSize:h.q.Small,tag:"a",rightIcon:o.default.createElement(F.Z,{className:"rotate-90"})},"View all")))}var re=n(38050);const ae=o.default.createElement("div",{className:"h-px bg-theme-divider-tertiary"}),oe=e=>{var t;let n=e.post,r=e.onLinkClick;return o.default.createElement("article",{className:a()("relative flex flex-col py-3 px-4 group items-start hover:bg-theme-hover",Y.Z.card)},o.default.createElement(_(),{href:n.commentsPermalink,prefetch:!1,passHref:!0},o.default.createElement(H.YS,{title:n.title,onClick:()=>r(n),onMouseUp:e=>1===e.button&&r(n)})),o.default.createElement("h5",{className:a()("typo-callout text-theme-label-primary mb-2 multi-truncate",Y.Z.title)},n.title),o.default.createElement("div",{className:"flex items-center typo-footnote text-theme-label-tertiary"},(null===(t=n.featuredComments)||void 0===t?void 0:t.length)>0&&o.default.createElement("div",{className:"relative mr-2 h-6",style:{width:`${n.featuredComments.length+.5}rem`}},n.featuredComments.map(((e,t)=>o.default.createElement(re.YY,{key:e.author.username,user:e.author,size:"small",className:"top-0",style:{left:`${t}rem`,position:"absolute"}})))),o.default.createElement("div",null,n.numComments," Comments")))},le=(0,S.Z)(V.f,"h-3 rounded-xl my-0.5"),ie=()=>o.default.createElement("article",{"aria-busy":!0,className:"flex relative flex-col items-start py-3 px-4"},o.default.createElement(le,{style:{width:"80%"}}),o.default.createElement(le,{style:{width:"80%"}}),o.default.createElement(le,{style:{width:"40%"}})),ce=(0,S.Z)(v.Hl,"flex flex-col");function se(e){var t,n;let r=e.posts,a=e.isLoading,l=e.className;const i=(0,o.useContext)(x.ZP).trackEvent,c=e=>{i((0,w.gR)("click",e,{extra:{origin:"best discussions"}}))},s=()=>{};return o.default.createElement(ce,{className:l},o.default.createElement("h4",{className:"py-3 pr-4 pl-6 typo-body text-theme-label-tertiary"},"Best discussions"),ae,a?o.default.createElement(o.default.Fragment,null,o.default.createElement(ie,null),o.default.createElement(ie,null),o.default.createElement(ie,null)):o.default.createElement(o.default.Fragment,null,null==r?void 0:r.slice(1).map((e=>o.default.createElement(oe,{key:e.id,post:e,onLinkClick:c})))),ae,o.default.createElement(_(),{href:null!==(t=null==r||null===(n=r[0])||void 0===n?void 0:n.commentsPermalink)&&void 0!==t?t:"/",prefetch:!1,passHref:!0},o.default.createElement(h.z,{className:"self-start my-2 ml-2 btn-tertiary",buttonSize:h.q.Small,tag:"a",rightIcon:o.default.createElement(F.Z,{className:"rotate-90"}),onClick:s,onMouseUp:e=>1===e.button&&void 0},"I'm feeling lucky")))}var ue,me=n(86548);function de(){return de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},de.apply(this,arguments)}const fe=function(e){return o.createElement("svg",de({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),ue||(ue=o.createElement("path",{d:"M5.75 6h12.5a.75.75 0 110 1.5H5.75a.75.75 0 010-1.5zm0 5h12.5a.75.75 0 110 1.5H5.75a.75.75 0 110-1.5zm0 5h6.5a.75.75 0 110 1.5h-6.5a.75.75 0 110-1.5z",fill:"currentcolor",fillRule:"evenodd"})))};var pe;function he(){return he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},he.apply(this,arguments)}const ve=function(e){return o.createElement("svg",he({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),pe||(pe=o.createElement("path",{d:"M12.5 16a1 1 0 01.117 1.993L12.5 18h-7a1 1 0 01-.117-1.993L5.5 16h7zm6-5a1 1 0 01.117 1.993L18.5 13h-13a1 1 0 01-.117-1.993L5.5 11h13zm0-5a1 1 0 01.117 1.993L18.5 8h-13a1 1 0 01-.117-1.993L5.5 6h13z",fill:"currentcolor",fillRule:"evenodd"})))};function ye(){return ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const be=e=>o.default.createElement(me.Z,ye({},e,{IconPrimary:fe,IconSecondary:ve})),ge="_1cnuD8VLP6jS7RRe0yMI9l";function Ee(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const we=o.default.createElement("div",{className:"mb-3 h-px bg-theme-divider-tertiary"}),xe=(e,t)=>t.id?`${e.permalink}?a=${t.id}`:e.permalink;function Oe(e){let t=e.post,n=e.className,r=e.collapsible;const l=(0,o.useContext)(x.ZP).trackEvent,i=function(){var e,n=(e=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l((0,w.gR)("click",t,{extra:{origin:"toc"}}));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){Ee(o,r,a,l,i,"next",e)}function i(e){Ee(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),c=o.default.createElement(o.default.Fragment,null,t.toc.map((e=>o.default.createElement("a",{key:e.text,href:xe(t,e),target:"_blank",rel:"noopener",title:e.text,onClick:i,className:"flex-1 py-2 px-4 truncate hover:bg-theme-hover typo-callout"},e.text)))),s="flex items-center py-3 px-4 typo-body text-theme-label-tertiary";return r?o.default.createElement("details",{className:a()("flex-col rounded-2xl bg-theme-bg-secondary overflow-hidden select-none",ge,n)},o.default.createElement(m.ER,{className:"hover:bg-theme-hover"},o.default.createElement("div",{className:s},o.default.createElement(be,{className:"mr-2 text-2xl"}),"Table of contents",o.default.createElement(m.vd,null))),we,c):o.default.createElement("section",{className:a()("flex-col rounded-2xl pb-3 bg-theme-bg-secondary overflow-hidden",n)},o.default.createElement("h4",{className:s},o.default.createElement(be,{className:"mr-2 text-2xl"}),"Table of contents"),we,c)}var Ne=n(87328);function Pe(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){Pe(o,r,a,l,i,"next",e)}function i(e){Pe(o,r,a,l,i,"throw",e)}l(void 0)}))}}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){je(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function je(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ze=(e,t,n)=>e.map((e=>e.id===t?Ce(Ce({},e),n(e)):e)),Ie=(e,t,n)=>function(){var r=ke(u().mark((function r(a){var o,l;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=a.id,r.next=3,e.cancelQueries(t);case 3:return l=e.getQueryData(t),e.setQueryData(t,Ce(Ce({},l),{},{trendingPosts:Ze(l.trendingPosts,o,n),similarPosts:Ze(l.similarPosts,o,n)})),r.abrupt("return",(()=>{e.setQueryData(t,l)}));case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();function Ae(e){var t,n;let r=e.currentPost,l=e.className;const i=r.id,c=r.tags,s=["furtherReading",i],d=(0,o.useContext)(E.ZP),f=d.user,p=d.showLogin,h=(0,o.useContext)(x.ZP).trackEvent,v=(0,T.useQueryClient)(),y=(0,T.useQuery)(s,(()=>L()(q.B3,D,{loggedIn:!!f,post:i,trendingFirst:1,similarFirst:3,discussedFirst:4,tags:c})),{refetchOnWindowFocus:!1,refetchIntervalInBackground:!1,refetchOnReconnect:!1,refetchInterval:!1,refetchOnMount:!1}),b=y.data,g=y.isLoading,O=(0,U.Z)({onBookmarkMutate:Ie(v,s,(()=>({bookmarked:!0}))),onRemoveBookmarkMutate:Ie(v,s,(()=>({bookmarked:!1})))}),N=O.bookmark,P=O.removeBookmark;if(!(null!=b&&b.similarPosts||g))return o.default.createElement(o.default.Fragment,null);const k=null!=b&&b.similarPosts?[...b.trendingPosts,...b.similarPosts.slice(0,Math.min(b.similarPosts.length,3-b.trendingPosts.length))]:[],S=function(){var e=ke(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f){e.next=3;break}return p(Ne.IP.Bookmark),e.abrupt("return");case 3:if(n=!t.bookmarked,h((0,w.gR)((0,m.Rt)({bookmarked:n}),t,{extra:{origin:"recommendation"}})),!n){e.next=10;break}return e.next=8,N({id:t.id});case 8:e.next=12;break;case 10:return e.next=12,P({id:t.id});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=(null===(t=r.toc)||void 0===t?void 0:t.length)>0;return o.default.createElement("div",{className:a()(l,"flex flex-col gap-6")},C&&o.default.createElement(Oe,{post:r,className:"hidden laptop:flex"}),(g||(null==k?void 0:k.length)>0)&&o.default.createElement(ne,{posts:k,isLoading:g,onBookmark:S}),(g||(null==b||null===(n=b.discussedPosts)||void 0===n?void 0:n.length)>0)&&o.default.createElement(se,{posts:null==b?void 0:b.discussedPosts,isLoading:g}))}var Me=n(45200),ze=n(60643),Re=n(6003),Le=n(56015),Te=n(57877);function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}const De=(0,S.Z)(c.w,"w-10 h-10"),qe=e=>{const t=e.userType,n=e.name,r=e.permalink,a=e.image;if("source"===t)return o.default.createElement(Re.t,{href:r,passHref:!0,prefetch:!1,tooltip:{placement:"bottom",content:n}},o.default.createElement(De,{className:"rounded-full cursor-pointer",imgSrc:a,imgAlt:n,background:"var(--theme-background-secondary)"}));const l=e;return o.default.createElement(Le.x,{href:l.permalink},o.default.createElement(De,{className:"rounded-12",imgSrc:a,imgAlt:n,background:"var(--theme-background-secondary)"}))},Ue=e=>{const t=e.id,n=e.handle,r=e.name,l=e.username,i=e.permalink,c=e.userType,s=void 0===c?"source":c,u=(e=>"source"===e?null:"author"===e?Me.Z:ze.Z)(s),m="source"===s?o.default.Fragment:Te.R;return o.default.createElement("div",{className:"flex relative flex-row p-3"},o.default.createElement(m,{user:{id:t}},o.default.createElement(Le.x,{href:i},o.default.createElement(qe,e))),u&&o.default.createElement(u,{secondary:!0,className:a()("absolute w-5 h-5 top-10 left-10","author"===s?"text-theme-color-cheese":"text-theme-color-bun")}),o.default.createElement(m,{user:{id:t}},o.default.createElement("div",{className:"flex flex-col ml-4"},o.default.createElement(Le.x,{className:"font-bold typo-callout",href:i},r),(n||l||t)&&o.default.createElement(Le.x,{className:"mt-0.5 typo-footnote text-theme-label-tertiary",href:i},"@",n||l||t))))};function $e(e){let t=e.post;const n=t.author,r=t.scout,a=t.source;return o.default.createElement(v.Hl,{className:"flex flex-col"},o.default.createElement(Ue,Be({},a,{userType:"source"})),n&&o.default.createElement(Ue,Be({},n,{userType:"author"})),r&&o.default.createElement(Ue,Be({},r,{userType:"scout"})))}var _e=n(75486);function Fe(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function Qe(e){let t=e.onShare,n=e.onBookmark,r=e.onReadArticle,a=e.post,l=e.className,i=e.onClose,c=e.origin,s=void 0===c?j.aP.ArticlePage:c;const d=(0,o.useContext)(E.ZP).tokenRefreshed,f=(0,o.useContext)(x.ZP).trackEvent,p=function(){var e,t=(e=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("share"in navigator)){e.next=9;break}return e.prev=1,e.next=4,navigator.share({text:`${a.title}\n${a.commentsPermalink}`});case 4:f((0,w.gR)("share post",a,{extra:{origin:s,provider:k.YE.Native}})),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(1);case 9:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){Fe(o,r,a,l,i,"next",e)}function i(e){Fe(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.default.createElement(m.ry,{className:l},o.default.createElement(_e.G,{onBookmark:n,onShare:t,onReadArticle:r,post:a,onClose:i,className:"hidden tablet:flex pt-6",contextMenuId:"post-widgets-context"}),o.default.createElement($e,{post:a}),o.default.createElement(z,{post:a}),o.default.createElement(g,{share:p,link:a.commentsPermalink}),d&&o.default.createElement(Ae,{currentPost:a}))}var Ye=n(53091),He=n(32713),Ve=n(47164),Ge=n(57304),We=n(70939),Je=n(89907),Ke=n(84558),Xe=n(94915);function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(){return rt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rt.apply(this,arguments)}const at=80,ot=120,lt=(0,S.Z)("main","flex flex-col flex-1 px-4 tablet:px-8 tablet:border-r tablet:border-theme-divider-tertiary");function it(e){var t,n,r;let s=e.post,u=e.className,m=void 0===u?{}:u,d=e.shouldOnboardAuthor,f=e.enableShowShareNewComment,p=e.origin,h=e.position,v=e.inlineActions,y=e.onPreviousPost,b=e.onNextPost,g=e.onClose,E=e.postPosition,w=e.isFallback,x=e.customNavigation,O=e.onRemovePost;const N=(0,He.sW)().subject,P=(0,Ge.Z)({origin:p,post:s}),k=P.onSharePost,S=P.onReadArticle,C=P.onToggleBookmark,j=!!y||!!b,Z=a()("tablet:pb-0 tablet:flex-row bg-theme-bg-primary",null==m?void 0:m.container),I={postPosition:E,onPreviousPost:y,onNextPost:b,post:s,onBookmark:C,onReadArticle:S,onClose:g,onShare:k,inlineActions:v,onRemovePost:O};return o.default.createElement(Ve.Z,{hasNavigation:j,className:Z,"aria-live":N===He._R.PostContent?"polite":"off"},"fixed"===h&&o.default.createElement(We.Z,rt({},I,{className:null==m?void 0:m.fixedNavigation})),o.default.createElement(lt,{className:a()("relative",null==m?void 0:m.content)},o.default.createElement(Je.F,{className:tt(tt({},m),{},{navigation:{actions:null==m||null===(t=m.navigation)||void 0===t?void 0:t.actions,container:a()("pt-6",null==m||null===(n=m.navigation)||void 0===n?void 0:n.container)}}),isFallback:w,customNavigation:x,enableShowShareNewComment:f,shouldOnboardAuthor:d,navigationProps:I,engagementProps:P,origin:p,post:s},o.default.createElement("h1",{className:"my-6 font-bold break-words typo-large-title"},s.title),s.summary&&o.default.createElement(i.Z,{className:"mb-6",summary:s.summary}),o.default.createElement(Ye.R,{tags:s.tags||[]}),o.default.createElement(l.Z,{createdAt:s.createdAt,readTime:s.readTime,className:"mt-4 mb-8 !typo-callout"}),o.default.createElement("a",rt({href:s.permalink,title:"Go to post",target:"_blank",rel:"noopener"},(0,Xe.K)(S),{className:"block overflow-hidden mb-10 rounded-2xl cursor-pointer",style:{maxWidth:"25.625rem"}}),o.default.createElement(c.w,{imgSrc:s.image,imgAlt:"Post cover image",ratio:"49%",eager:!0,fallbackSrc:Ke.n.post.imageCoverPlaceholder})),(null===(r=s.toc)||void 0===r?void 0:r.length)>0&&o.default.createElement(Oe,{post:s,collapsible:!0,className:"flex laptop:hidden mt-2 mb-4"}))),o.default.createElement(Qe,{onBookmark:C,onShare:k,onReadArticle:S,post:s,className:"pb-8",onClose:g,origin:p}))}},47164:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(35776),a=n(32256);const o=(0,a.Z)("div","flex flex-col w-full pb-6"),l=(0,a.Z)(o,"m-auto w-full laptop:border-l laptop:border-theme-divider-tertiary");const i=function(e){let t=e.hasNavigation,n=e.className,a=e.children;const i=t?o:l;return r.default.createElement(i,{className:n},a)}},75486:(e,t,n)=>{n.d(t,{G:()=>k});var r=n(86484),a=n.n(r),o=n(35776),l=n(94184),i=n.n(l),c=n(85708),s=n(59363),u=n(96028),m=n(55910),d=n(62835),f=n(52809),p=n(71639),h=n(32256),v=n(36583),y=n(26990),b=n(48356),g=n(69282),E=n(38061);const w=["onReadArticle","onShare","onBookmark","post","onClose","inlineActions","className","notificactionClassName","contextMenuId","onRemovePost"];function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}function O(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function N(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const P=(0,h.Z)("div","flex flex-row items-center");function k(e){var t,n,r;let l=e.onReadArticle,h=e.onShare,k=e.onBookmark,S=e.post,C=e.onClose,j=e.inlineActions,Z=e.className,I=(e.notificactionClassName,e.contextMenuId),A=e.onRemovePost,M=N(e,w);const z=(0,o.useContext)(E.ZP).openNewTab,R=(0,o.useContext)(d.ZP).user,L=(0,p.Z)(I).showReportMenu,T=(0,g.G)().showPrompt,B=null==R||null===(t=R.roles)||void 0===t?void 0:t.includes(m.G7.Moderator),D=function(){var e,t=(e=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={title:"Ban post 💩",description:"Are you sure you want to ban this post?",okButton:{title:"Ban",className:"btn-primary-ketchup"}},e.next=3,T(t);case 3:if(!e.sent){e.next=6;break}return e.next=6,(0,f.uq)(S.id);case 6:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){O(o,r,a,l,i,"next",e)}function i(e){O(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return o.default.createElement(P,x({},M,{className:i()("gap-2",Z)}),l&&o.default.createElement(v.i,{placement:"bottom",content:"Read post",disabled:!j},o.default.createElement(y.z,{className:j?"btn-tertiary":"btn-secondary",tag:"a",href:null!==(n=null===(r=S.sharedPost)||void 0===r?void 0:r.permalink)&&void 0!==n?n:S.permalink,target:z?"_blank":"_self",icon:o.default.createElement(u.Z,null),onClick:l},!j&&"Read post")),o.default.createElement(v.i,{placement:"bottom",content:"Options"},o.default.createElement(y.z,{className:i()("btn-tertiary",!j&&"ml-auto"),icon:o.default.createElement(c.Z,null),onClick:e=>(e=>{const t=e.currentTarget.getBoundingClientRect(),n=t.right,r=t.bottom;L(e,{position:{x:n,y:r+4}})})(e)})),C&&o.default.createElement(v.i,{placement:"bottom",content:"Close"},o.default.createElement(y.z,{className:"btn-tertiary",icon:o.default.createElement(s.Z,null),onClick:e=>C(e)})),o.default.createElement(b.Z,{onBookmark:k,onShare:h,post:S,onRemovePost:A,setShowBanPost:B?()=>D():null,contextId:I}))}},48584:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(35776),a=n(94184),o=n.n(a),l=n(26990),i=n(36583),c=n(8311),s=n(75486),u=n(30113);const m=["postPosition","onPreviousPost","onNextPost","className","children"];function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const p=function(e){let t=e.postPosition,n=e.onPreviousPost,a=e.onNextPost,p=e.className,h=void 0===p?{}:p,v=e.children,y=f(e,m);return r.default.createElement("div",{className:o()("flex flex-row gap-2 items-center",null==h?void 0:h.container),role:"navigation"},n&&r.default.createElement(i.i,{content:"Previous"},r.default.createElement(l.z,{className:"-rotate-90 btn-secondary",icon:r.default.createElement(c.Z,null),onClick:n,disabled:[u.t.First,u.t.Only].includes(t)})),a&&r.default.createElement(i.i,{content:"Next"},r.default.createElement(l.z,{className:"rotate-90 btn-secondary",icon:r.default.createElement(c.Z,null),onClick:a,disabled:[u.t.Last,u.t.Only].includes(t)})),v,r.default.createElement(s.G,d({},y,{className:o()("flex",null==h?void 0:h.actions),notificactionClassName:"ml-4",contextMenuId:"post-navigation-context"})))}},23576:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(35776),a=n(94184),o=n.n(a),l=n(47393),i=n(12107),c=n(7842),s=n(83341);function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}const m={[l.Pt.Moderator]:c.Z,[l.Pt.Admin]:i.Z},d=e=>{let t=e.role,n=e.className,a=e.iconProps;const l=m[t];if(!l)return null;return r.default.createElement(s.Z,{className:o()("text-theme-color-cabbage",n),content:t,Icon:e=>r.default.createElement(l,u({secondary:!0},e)),iconProps:a})}},57751:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(35776);const a=function(e){let t=e.children;return(0,r.createPortal)(t,document.body)}},8437:(e,t,n)=>{n.d(t,{Gd:()=>i,Hl:()=>o,P5:()=>l});var r=n(32256),a=n(34051);const o=(0,r.Z)("div","border border-theme-divider-tertiary rounded-16"),l=(0,r.Z)(a.f,"h-3 rounded-xl my-0.5"),i=(0,r.Z)("div","h-px bg-theme-divider-tertiary")},3805:(e,t,n)=>{n.d(t,{t:()=>a});var r=n(35776);const a=e=>{let t=e.source,n=e.user;return(0,r.useMemo)((()=>{var e,r;return{role:null==t||null===(e=t.privilegedMembers)||void 0===e||null===(r=e.find((e=>e.user.id===(null==n?void 0:n.id))))||void 0===r?void 0:r.role}}),[n,t])}},7525:(e,t,n)=>{n.d(t,{ZP:()=>y,cM:()=>v});var r=n(28687),a=n.n(r),o=n(35776),l=n(88767),i=n(50562),c=n(62835),s=n(52809);const u=["id"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const h=e=>["post",e],v=(e,t,n)=>{n.id;let r=p(n,u);return e.setQueryData(h(t),(e=>({post:d(d({},e.post),r)})))},y=e=>{let t=e.id,n=e.options,r=void 0===n?{}:n;const u=(0,c.Eu)().tokenRefreshed,m=h(t),f=(0,l.useQuery)(m,(()=>a()(i.B3,s.HW,{id:t})),d(d({},r),{},{enabled:!!t&&u})),p=f.data,v=f.isError,y=f.isFetched,b=f.isLoading,g=f.isFetching,E=f.isRefetching,w=p||(null==r?void 0:r.initialData);return(0,o.useMemo)((()=>({post:null==w?void 0:w.post,isError:v,isFetched:y,isPostLoadingOrFetching:(b||g)&&!E})),[null==w?void 0:w.post,v,y,b,g,E])}},57304:(e,t,n)=>{n.d(t,{Z:()=>E});var r=n(86484),a=n.n(r),o=n(35776),l=n(88767),i=n(62835),c=n(62703),s=n(52809),u=n(92600),m=n(96491),d=n(38e3),f=n(87328),p=n(98677),h=n(52250),v=n(79924),y=n(73308),b=n(7525);function g(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}const E=e=>{let t=e.origin,n=e.post;const r=null==n?void 0:n.id,E=(0,l.useQueryClient)(),w=(0,i.Eu)(),x=w.user,O=w.showLogin,N=(0,d.Os)().trackEvent,P=(0,u.Z)().updatePost,k=(0,v.Z)({origin:t}),S=()=>k({post:(null==n?void 0:n.sharedPost)||n,optional:{parent_id:n.sharedPost&&n.id}}),C=(0,m.Z)({onBookmarkMutate:P({id:r,update:{bookmarked:!0}}),onRemoveBookmarkMutate:P({id:r,update:{bookmarked:!1}})}),j=C.bookmark,Z=C.bookmarkToast,I=C.removeBookmark,A=(0,c.h)(t),M=A.sharePost,z=A.openSharePost,R=A.closeSharePost,L=()=>z(n),T=function(){var e,r=(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=3;break}return O(f.IP.Bookmark),e.abrupt("return");case 3:if(r=!(null!=n&&n.bookmarked),N((0,p.gR)((0,h.Rt)({bookmarked:r}),n,{extra:{origin:t}})),!r){e.next=10;break}return e.next=8,j({id:null==n?void 0:n.id});case 8:e.next=12;break;case 10:return e.next=12,I({id:null==n?void 0:n.id});case 12:Z(r);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){g(o,r,a,l,i,"next",e)}function i(e){g(o,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return r.apply(this,arguments)}}();return(0,y.Z)((()=>({query:s.uw,variables:{ids:[r]}})),{next:e=>{e.postsEngaged.id===r&&(0,b.cM)(E,n.id,e.postsEngaged)}}),(0,o.useEffect)((()=>{n&&N((0,p.gR)(`${t} view`,n))}),[n]),(0,o.useMemo)((()=>({sharePost:M,onReadArticle:S,onToggleBookmark:T,onSharePost:L,onCloseShare:R})),[n,x,t,M])}},30742:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(35776),a=n(62510);const o=n(36876).w8;function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const c=e=>{let t=e.isLoading,n=e.isDisplayed,i=e.offset,c=void 0===i?0:i;var s;(0,r.useEffect)((()=>{var e,t;window.matchMedia&&(window.matchMedia(o.replace("@media ","")).matches||(window.scroll(0,0),null===(e=document.querySelector('[role="dialog"]'))||void 0===e||null===(t=e.scroll)||void 0===t||t.call(e,0,0)))}),[]),s=n,(0,r.useEffect)((()=>{const e=document.querySelector("#__next");e&&(s?e.classList.add("hide-on-modal"):e.classList.remove("hide-on-modal"))}),[s]);const u=l((0,r.useState)("relative"),2),m=u[0],d=u[1];return((e,t)=>{let n=t.onOverOffset,a=t.onUnderOffset,o=t.offset,l=t.scrollProperty,i=void 0===l?"scrollTop":l;(0,r.useEffect)((()=>{const t=e();if(!t)return null;const r=e=>{(e.currentTarget[i]>o?n:a)()};return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}}),[n,a,o,i])})((()=>{var e,t,n;return null===(e=document)||void 0===e||null===(t=e.getElementById)||void 0===t||null===(n=t.call(e,"post-modal"))||void 0===n?void 0:n.parentElement}),{onOverOffset:()=>"fixed"!==m&&d("fixed"),onUnderOffset:()=>"relative"!==m&&d("relative"),offset:a.QY+c}),(0,r.useEffect)((()=>{if(t){var e;const t=document.getElementById("post-modal");if(!t)return;const n=t.parentElement;null==n||null===(e=n.scrollTo)||void 0===e||e.call(n,0,0),d("relative")}}),[t]),m}},92600:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(86484),a=n.n(r),o=n(88767);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t,n,r,a,o,l){try{var i=e[o](l),c=i.value}catch(e){return void n(e)}i.done?t(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){s(o,r,a,l,i,"next",e)}function i(e){s(o,r,a,l,i,"throw",e)}l(void 0)}))}}function m(){const e=(0,o.useQueryClient)();return{updatePost:t=>u(a().mark((function n(){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=["post",t.id],n.next=3,e.cancelQueries(r);case 3:return o=e.getQueryData(r),e.setQueryData(r,{post:i(i({},o.post),t.update)}),n.abrupt("return",(()=>{e.setQueryData(r,o)}));case 6:case"end":return n.stop()}}),n)})))}}},13830:(e,t,n)=>{n.d(t,{Z:()=>r});const r={markdown:"_2hdl4yb5NZm1y6G1QuSjI0"}}}]);