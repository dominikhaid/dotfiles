!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire94f3;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){let i=n[e];delete n[e];let r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire94f3=i);var r=i("2lHoE"),o=i("64sVI");r=i("2lHoE");var l=class{get isBeingInspected(){return this.isPanelActive||this.isSidebarActive}constructor(){r.defineProperty(this,"isPanelActive",!1),r.defineProperty(this,"isSidebarActive",!1)}};let s=new Map,c={"dom-changed-warning":!0,"contexts-click-to-expand":!1},a=null;function u(){chrome.storage.local.set({settings:c})}function d(){return new Promise(((e,t)=>{try{chrome.storage.local.get(["settings"],(t=>{a=t.settings,e(a)}))}catch(e){t(e)}}))}function p(){return(p=r.asyncToGenerator((function*(e){let t=yield h("panel",e,!1),n=yield h("sidebar",e,!1);t&&(yield t.setShouldUpdateSettings(!0)),n&&(yield n.setShouldUpdateSettings(!0))}))).apply(this,arguments)}function y(e){return new Promise(((t,n)=>{chrome.tabs.executeScript(e,{file:"/scripts/content.js"},(()=>{t()}))}))}function f(){return(f=r.asyncToGenerator((function*(e,t,n){let i=void 0===n||n;if(!O.hasConnectedScript(e,t)){if(!i)return;yield y(t)}let r=yield O.getScriptConnection(e,t);if(r)return r}))).apply(this,arguments)}function h(e,t){return f.apply(this,arguments)}function g(){return(g=r.asyncToGenerator((function*(e){let t=yield h("content",e);return yield t.analysePage(),yield t.getAllContextsJSON()}))).apply(this,arguments)}function b(){return(b=r.asyncToGenerator((function*(e,t){let n=yield h("content",e);yield n.highlightContext(t)}))).apply(this,arguments)}function S(){return(S=r.asyncToGenerator((function*(e){let t=yield h("content",e);yield t.undoHighlightContext()}))).apply(this,arguments)}function v(){return(v=r.asyncToGenerator((function*(e,t){let n=yield h("content",e);yield n.scrollToContext(t)}))).apply(this,arguments)}function x(){return(x=r.asyncToGenerator((function*(e,t){let n=yield h("content",e);return yield n.getPathFromContext(t)}))).apply(this,arguments)}function T(){return(T=r.asyncToGenerator((function*(e,t){let n=yield h("content",e);yield n.detectLastInspectedElement(t)}))).apply(this,arguments)}function m(){return(m=r.asyncToGenerator((function*(e){let t=yield h("content",e);return yield t.getInspectedElementDetails()}))).apply(this,arguments)}function C(){return(C=r.asyncToGenerator((function*(e){let t=yield h("content",e);return yield t.getPageFramesSources()}))).apply(this,arguments)}function I(){return(I=r.asyncToGenerator((function*(e){let t=yield h("content",e);console.log("Starting DOM Observer..."),yield t.startDOMObserver()}))).apply(this,arguments)}function P(){return(P=r.asyncToGenerator((function*(e){let t=yield h("content",e);console.log("Stopping DOM Observer..."),yield t.stopDOMObserver()}))).apply(this,arguments)}function w(){return(w=r.asyncToGenerator((function*(e){let t=yield h("panel",e,!1),n=yield h("sidebar",e,!1);t&&(yield t.setShouldUpdate(!0)),n&&(yield n.setShouldUpdate(!0))}))).apply(this,arguments)}function G(e,t,n){console.log(`The script '${t}' related to the tab '${e}' is currently ${n?"active":"hidden"}`);let i=s.get(e);null==i&&(i=new l,s.set(e,i));let r=i.isBeingInspected;switch(t){case"panel":i.isPanelActive=n;break;case"sidebar":i.isSidebarActive=n;break;default:return}let o=i.isBeingInspected;r!=o&&(o?function(e){I.apply(this,arguments)}(e):function(e){P.apply(this,arguments)}(e))}let O=new o.BackgroundHandler({analysePage:function(e){return g.apply(this,arguments)},highlightContext:function(e,t){return b.apply(this,arguments)},undoHighlightContext:function(e){return S.apply(this,arguments)},scrollToContext:function(e,t){return v.apply(this,arguments)},getPathFromContext:function(e,t){return x.apply(this,arguments)},detectLastInspectedElement:function(e,t){return T.apply(this,arguments)},getInspectedElementDetails:function(e){return m.apply(this,arguments)},getPageFramesSources:function(e){return C.apply(this,arguments)},sendDOMChangedWarning:function(e){return w.apply(this,arguments)},updateDevtoolsPageStatus:G,loadExtensionSettings:d,saveExtensionSettings:function(e){return new Promise(((t,n)=>{try{chrome.storage.local.set({settings:e},(()=>{t()}))}catch(e){n(e)}}))},notifySettingsChanged:function(e){return p.apply(this,arguments)}},{errorCallback:function(e){console.log(e.errorId),console.error(e.error)}});O.addListener("connectionreceived",(e=>{let t=e.scriptId,n=e.tabId;if(null==n){let e=t.search("-");n=parseInt(t.substring(e+1)),t=t.substring(0,e),G(n,t,!0)}})),O.addListener("connectionended",(e=>{let t=e.scriptId,n=e.tabId;if(null==n){let e=t.search("-");n=parseInt(t.substring(e+1)),t=t.substring(0,e),G(n,t,!1)}})),d().then((e=>{e||u()})).catch((()=>{u()}))}();
//# sourceMappingURL=background.39536404.js.map
